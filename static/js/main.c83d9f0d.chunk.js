(this.webpackJsonpwebapp=this.webpackJsonpwebapp||[]).push([[0],{147:function(e,t,n){},148:function(e,t,n){},349:function(e,t,n){},351:function(e,t,n){"use strict";n.r(t);var r=n(1),c=n.n(r),i=n(57),s=n.n(i),l=(n(147),n(13)),a=(n(148),n(84),n(0));function j(e){var t=e.driver;return Object(a.jsx)("div",{className:"DriverSelect-wrapper",children:Object(a.jsx)("p",{className:"DriverSelect-name",children:(null===t||void 0===t?void 0:t.driverName)||"No driver"})})}function o(e){var t=e.currentDriver,n=e.drivers,r=e.clickHandler,c=n.map((function(e,n){return Object(a.jsx)("li",{className:"DriverList-Selector button "+(e===t?"selected":""),onClick:function(){return r(e,!0)},children:Object(a.jsx)(j,{driver:e})},e.driverName+n)})),i=Object(a.jsx)("li",{className:"DriverList-Selector",children:Object(a.jsx)(j,{})});return Object(a.jsx)("ul",{className:"DriverList-Wrapper noselect",children:c.length?c:i})}function d(e){var t=new Date(e),n=60*t.getTimezoneOffset()*1e3;return new Date(t.getTime()-n).toISOString().slice(0,19).replace(/-/g,"/").replace("T"," ")}function u(e,t){return t.eventTime-e.eventTime}function v(e,t,n){return!t||(r=e,c=n[t-1],!(r.pos.lat===c.pos.lat&&r.pos.lng===c.pos.lng));var r,c}function b(e,t){return t.routeId-e.routeId}function O(e,t){return t.routeName.localeCompare(e.routeName)}function h(e,t){return t.speed-e.speed}function x(e,t){return t.eventType.localeCompare(e.eventType)}function f(e,t){return t.congestionLevel-e.congestionLevel}function p(e,t){return e.windy===t.windy?0:e.windy?-1:1}function m(e,t){return e.rainy===t.rainy?0:e.rainy?-1:1}function g(e,t){return e.foggy===t.foggy?0:e.foggy?-1:1}var N=n(37),y=(n(85),n(20));function k(e){var t=e.driver,n=e.clickHandler,c=Object(r.useState)(!1),i=Object(l.a)(c,2),s=i[0],j=i[1];return Object(a.jsx)(y.Marker,{position:t.events[0].pos,onClick:function(){j(!s),n(t,!1)},children:s&&Object(a.jsx)(y.InfoWindow,{onCloseClick:function(){return j(!1)},children:Object(a.jsx)("p",{children:t.driverName})})})}var D={url:"http://maps.google.com/mapfiles/kml/pushpin/ylw-pushpin.png",origin:{x:-12,y:0}};function C(e){var t=e.event;return Object(a.jsx)(y.Marker,{position:null===t||void 0===t?void 0:t.pos,icon:D})}var w={lat:35.191766965947394,lng:-90.0439453125},T=function(e){return{height:e?"50vh":"0"}},S={height:"100%"};var E=Object(y.withGoogleMap)((function(e){var t=e.recenter,n=e.currentDriver,r=e.drivers,c=e.clickHandler,i=e.event;return Object(a.jsxs)(y.GoogleMap,Object(N.a)(Object(N.a)({defaultZoom:5,defaultCenter:w,options:{gestureHandling:"greedy"}},t&&n?{center:n.events[0].pos}:{}),{},{children:[r.map((function(e,t){return e.events[0].pos!==(null===i||void 0===i?void 0:i.pos)&&Object(a.jsx)(k,{driver:e,clickHandler:c},e.driverName+t)})),Object(a.jsx)(C,{event:i})]}))})),I=(n(349),"driverEvent-big"),H="driverEvent-small";function F(e){var t=e.event,n=e.clickHandle,r=e.selected;return Object(a.jsxs)("tr",{onClick:n,className:"button "+(r?"selected":""),children:[Object(a.jsx)("td",{className:I,children:d(t.eventTime)}),Object(a.jsx)("td",{className:H,children:t.routeId}),Object(a.jsx)("td",{className:I,children:t.routeName}),Object(a.jsx)("td",{className:H,children:t.speed}),Object(a.jsx)("td",{className:I,children:t.eventType}),Object(a.jsx)("td",{className:H,children:t.foggy?"True":"False"}),Object(a.jsx)("td",{className:H,children:t.rainy?"True":"False"}),Object(a.jsx)("td",{className:H,children:t.windy?"True":"False"}),Object(a.jsx)("td",{className:"driverEvent-last",children:t.congestionLevel})]})}function L(e){var t=e.currentEvent,n=e.eventSelectHandle,c=e.currentDriver,i=Object(r.useState)(!1),s=Object(l.a)(i,2),j=s[0],o=s[1],d=Object(r.useState)((function(){return u})),N=Object(l.a)(d,2),y=N[0],k=N[1],D=Object(r.useRef)(null);Object(r.useEffect)((function(){var e;o(!1),k((function(){return u})),null===(e=D.current)||void 0===e||e.scrollIntoView()}),[c]);var C,w,T=function(e){y===e?o(!j):(o(!1),k((function(){return e})))};return Object(a.jsxs)("table",{className:"noselect",children:[Object(a.jsx)("thead",{children:Object(a.jsxs)("tr",{className:"driverEvent-Title",children:[Object(a.jsx)("th",{className:I,onClick:function(){return T(u)},children:Object(a.jsx)("div",{children:"Date :"})}),Object(a.jsx)("th",{className:H,onClick:function(){return T(b)},children:Object(a.jsx)("div",{children:"Route ID :"})}),Object(a.jsx)("th",{className:I,onClick:function(){return T(O)},children:Object(a.jsx)("div",{children:"Route name :"})}),Object(a.jsx)("th",{className:H,onClick:function(){return T(h)},children:Object(a.jsx)("div",{children:"Speed :"})}),Object(a.jsx)("th",{className:I,onClick:function(){return T(x)},children:Object(a.jsx)("div",{children:"Event type :"})}),Object(a.jsx)("th",{className:H,onClick:function(){return T(g)},children:Object(a.jsx)("div",{children:"Foggy :"})}),Object(a.jsx)("th",{className:H,onClick:function(){return T(m)},children:Object(a.jsx)("div",{children:"Rainy :"})}),Object(a.jsx)("th",{className:H,onClick:function(){return T(p)},children:Object(a.jsx)("div",{children:"Windy :"})}),Object(a.jsx)("th",{className:I,onClick:function(){return T(f)},children:Object(a.jsx)("div",{children:"Congestion level :"})})]})}),Object(a.jsxs)("tbody",{children:[Object(a.jsx)("tr",{ref:D}),c.events.filter(v).sort((C=y,w=j,function(e,t){return(w?-1:1)*C(e,t)})).map((function(e,r){return Object(a.jsx)(F,{selected:e===t,event:e,clickHandle:function(){return n(e)}},e.eventTime+r)}))]})]})}var P=n(350);function R(e){var t=e.event;return Object(a.jsxs)("div",{children:[Object(a.jsxs)("p",{children:[Object(a.jsx)("b",{children:"Date :"})," ",d(t.eventTime)]}),Object(a.jsxs)("p",{children:[Object(a.jsx)("b",{children:"Route ID :"})," ",t.routeId]}),Object(a.jsxs)("p",{children:[Object(a.jsx)("b",{children:"Route Name :"})," ",t.routeName]}),Object(a.jsxs)("p",{children:[Object(a.jsx)("b",{children:"Speed :"})," ",t.speed," km/h"]}),Object(a.jsxs)("p",{children:[Object(a.jsx)("b",{children:"Event type :"})," ",t.eventType]}),Object(a.jsxs)("p",{children:[Object(a.jsx)("b",{children:"Foggy :"})," ",t.foggy?"True":"False"]}),Object(a.jsxs)("p",{children:[Object(a.jsx)("b",{children:"Rainy :"})," ",t.rainy?"True":"False"]}),Object(a.jsxs)("p",{children:[Object(a.jsx)("b",{children:"Windy :"})," ",t.windy?"True":"False"]}),Object(a.jsxs)("p",{children:[Object(a.jsx)("b",{children:"Congestion level :"})," ",t.congestionLevel]}),Object(a.jsxs)("p",{children:[Object(a.jsx)("b",{children:"Event position :"})," ",P(t.pos.lat,t.pos.lng).format()]})]})}function M(e){var t,n=e.currentDriver,c=e.drivers,i=e.recenter,s=e.currentDriverHandler,j=Object(r.useState)(!1),o=Object(l.a)(j,2),d=o[0],u=o[1],v=Object(r.useState)(void 0),b=Object(l.a)(v,2),O=b[0],h=b[1];return Object(r.useEffect)((function(){h(void 0)}),[n]),Object(a.jsxs)("div",{className:"DriverPage-wrapper",children:[Object(a.jsxs)("div",{className:"DriverPage-info-wrapper",children:[Object(a.jsx)("div",{className:"DriverPage-info",children:Object(a.jsxs)("p",{children:["Driver Name : ",void 0===n?"No driver selected.":n.driverName,Object(a.jsx)("br",{}),"Truck ID : ",null===n||void 0===n?void 0:n.truckId]})}),n&&Object(a.jsx)("div",{className:"DriverPage-switch-button button noselect",onClick:function(){return u(!d)},children:Object(a.jsx)("p",{children:d?"Events Map Page":"Events Info Page"})})]}),Object(a.jsx)(E,Object(N.a)({recenter:i,currentDriver:n,drivers:c,clickHandler:s,event:O},(t=!d,{containerElement:Object(a.jsx)("div",{style:T(t)}),mapElement:Object(a.jsx)("div",{style:S})}))),n&&Object(a.jsx)(L,{currentEvent:O,currentDriver:n,eventSelectHandle:h}),d&&O&&Object(a.jsx)(R,{event:O})]})}var W=function(){var e=Object(r.useState)([]),t=Object(l.a)(e,2),n=t[0],c=t[1],i=Object(r.useState)(void 0),s=Object(l.a)(i,2),j=s[0],d=s[1],u=Object(r.useState)(!1),v=Object(l.a)(u,2),b=v[0],O=v[1];Object(r.useEffect)((function(){var e,t;e=window.location.href+"/drivers.json",t=c,fetch(e).then((function(e){return e.json()}),(function(e){console.log(e)})).then((function(e){t(e)}),(function(e){console.log(e)}))}),[]);var h=function(e,t){O(t),d(e)};return Object(a.jsxs)("div",{className:"app-wrapper",children:[Object(a.jsx)("div",{className:"app-driverList",children:Object(a.jsx)(o,{currentDriver:j,drivers:n,clickHandler:h})}),Object(a.jsx)("div",{className:"app-driverPage",children:Object(a.jsx)(M,{currentDriver:j,drivers:n,currentDriverHandler:h,recenter:b})})]})},B=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,352)).then((function(t){var n=t.getCLS,r=t.getFID,c=t.getFCP,i=t.getLCP,s=t.getTTFB;n(e),r(e),c(e),i(e),s(e)}))};s.a.render(Object(a.jsx)(c.a.StrictMode,{children:Object(a.jsx)(W,{})}),document.getElementById("root")),B()},84:function(e,t,n){},85:function(e,t,n){}},[[351,1,2]]]);
//# sourceMappingURL=main.c83d9f0d.chunk.js.map