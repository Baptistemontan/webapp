(this.webpackJsonpwebapp=this.webpackJsonpwebapp||[]).push([[0],{147:function(e,t,r){},148:function(e,t,r){},349:function(e,t,r){},351:function(e,t,r){"use strict";r.r(t);var n=r(1),c=r.n(n),i=r(57),s=r.n(i),l=(r(147),r(14)),d=(r(148),r(84),r(0));function j(e){var t=e.driver;return Object(d.jsx)("div",{className:"DriverSelect-wrapper",children:Object(d.jsx)("p",{className:"DriverSelect-name",children:(null===t||void 0===t?void 0:t.driverName)||"No driver"})})}function a(e){var t=e.currentDriver,r=e.drivers,n=e.clickHandler,c=r.map((function(e,r){return Object(d.jsx)("li",{className:"DriverList-Selector button "+(e.driverId===(null===t||void 0===t?void 0:t.driverId)?"selected":""),onClick:function(){return n(e,!0)},children:Object(d.jsx)(j,{driver:e})},e.driverName+r)})),i=Object(d.jsx)("li",{className:"DriverList-Selector",children:Object(d.jsx)(j,{})});return Object(d.jsx)("ul",{className:"DriverList-Wrapper",children:c.length?c:i})}function v(e){var t=new Date(e),r=60*t.getTimezoneOffset()*1e3;return new Date(t.getTime()-r).toISOString().slice(0,19).replace(/-/g,"/").replace("T"," ")}var o=r(37),b=(r(85),r(20));function u(e){var t=e.driver,r=e.clickHandler,c=Object(n.useState)(!1),i=Object(l.a)(c,2),s=i[0],j=i[1];return Object(d.jsx)(b.Marker,{position:t.events[0].pos,onClick:function(){j(!s),r(t,!1)},children:s&&Object(d.jsx)(b.InfoWindow,{onCloseClick:function(){return j(!1)},children:Object(d.jsx)("p",{children:t.driverName})})})}var O={url:"http://maps.google.com/mapfiles/kml/pushpin/ylw-pushpin.png",origin:{x:-12,y:0}};function h(e){var t=e.event;return Object(d.jsx)(b.Marker,{position:null===t||void 0===t?void 0:t.pos,icon:O})}var x={lat:35.191766965947394,lng:-90.0439453125},p=function(e){return{height:e?"50vh":"0"}},m={height:"100%"};var f=Object(b.withGoogleMap)((function(e){var t=e.recenter,r=e.currentDriver,n=e.drivers,c=e.clickHandler,i=e.event;return Object(d.jsxs)(b.GoogleMap,Object(o.a)(Object(o.a)({defaultZoom:5,defaultCenter:x,options:{gestureHandling:"greedy"}},t&&r?{center:r.events[0].pos}:{}),{},{children:[Object(d.jsx)(d.Fragment,{children:n.map((function(e,t){return e.events[0].pos!==(null===i||void 0===i?void 0:i.pos)&&Object(d.jsx)(u,{driver:e,clickHandler:c},e.driverName+t)}))}),Object(d.jsx)(h,{event:i})]}))}));r(349);function g(e){var t=e.event,r=e.clickHandle,n=e.selected;return Object(d.jsxs)("tr",{onClick:r,className:"button "+(n?"selected":""),children:[Object(d.jsx)("td",{className:"driverEvent-big",children:v(t.eventTime)}),Object(d.jsx)("td",{className:"driverEvent-small",children:t.routeId}),Object(d.jsx)("td",{className:"driverEvent-big",children:t.routeName}),Object(d.jsx)("td",{className:"driverEvent-small",children:t.speed}),Object(d.jsx)("td",{className:"driverEvent-big",children:t.eventType}),Object(d.jsx)("td",{className:"driverEvent-small",children:t.foggy?"True":"False"}),Object(d.jsx)("td",{className:"driverEvent-small",children:t.rainy?"True":"False"}),Object(d.jsx)("td",{className:"driverEvent-small",children:t.windy?"True":"False"}),Object(d.jsx)("td",{className:"driverEvent-last",children:t.congestionLevel})]})}function N(e){var t=e.eventSelectHandle,r=e.currentDriver,c=Object(n.useState)(void 0),i=Object(l.a)(c,2),s=i[0],j=i[1],a=Object(n.useRef)(null);Object(n.useEffect)((function(){var e;j(void 0),null===(e=a.current)||void 0===e||e.scrollIntoView()}),[r]);var v=function(e){void 0!==s&&(j(s+(e?-1:1)),t(r.events[s]))};return Object(d.jsxs)("table",{tabIndex:0,onKeyDown:function(e){void 0===s||e.repeat||("ArrowDown"===e.key&&s<r.events.length-1?v(!1):"ArrowUp"===e.key&&s>0&&v(!0))},children:[Object(d.jsx)("thead",{children:Object(d.jsxs)("tr",{className:"driverEvent-Title",children:[Object(d.jsx)("th",{className:"driverEvent-big",children:Object(d.jsx)("div",{children:"Date :"})}),Object(d.jsx)("th",{className:"driverEvent-small",children:Object(d.jsx)("div",{children:"Route ID :"})}),Object(d.jsx)("th",{className:"driverEvent-big",children:Object(d.jsx)("div",{children:"Route name :"})}),Object(d.jsx)("th",{className:"driverEvent-small",children:Object(d.jsx)("div",{children:"Speed :"})}),Object(d.jsx)("th",{className:"driverEvent-big",children:Object(d.jsx)("div",{children:"Event type :"})}),Object(d.jsx)("th",{className:"driverEvent-small",children:Object(d.jsx)("div",{children:"Foggy :"})}),Object(d.jsx)("th",{className:"driverEvent-small",children:Object(d.jsx)("div",{children:"Rainy :"})}),Object(d.jsx)("th",{className:"driverEvent-small",children:Object(d.jsx)("div",{children:"Windy :"})}),Object(d.jsx)("th",{className:"driverEvent-big",children:Object(d.jsx)("div",{children:"Congestion level :"})})]})}),Object(d.jsxs)("tbody",{children:[Object(d.jsx)("tr",{ref:a}),Object(d.jsx)(d.Fragment,{children:r.events.map((function(e,r){return Object(d.jsx)(g,{selected:r===s,event:e,clickHandle:function(){!function(e,r){j(r),t(e)}(e,r)}},e.routeName+r)}))})]})]})}var D=r(350);function E(e){var t=e.event;return Object(d.jsxs)("div",{children:[Object(d.jsxs)("p",{children:[Object(d.jsx)("b",{children:"Date :"})," ",v(t.eventTime)]}),Object(d.jsxs)("p",{children:[Object(d.jsx)("b",{children:"Route ID :"})," ",t.routeId]}),Object(d.jsxs)("p",{children:[Object(d.jsx)("b",{children:"Route Name :"})," ",t.routeName]}),Object(d.jsxs)("p",{children:[Object(d.jsx)("b",{children:"Speed :"})," ",t.speed," km/h"]}),Object(d.jsxs)("p",{children:[Object(d.jsx)("b",{children:"Event type :"})," ",t.eventType]}),Object(d.jsxs)("p",{children:[Object(d.jsx)("b",{children:"Foggy :"})," ",t.foggy?"True":"False"]}),Object(d.jsxs)("p",{children:[Object(d.jsx)("b",{children:"Rainy :"})," ",t.rainy?"True":"False"]}),Object(d.jsxs)("p",{children:[Object(d.jsx)("b",{children:"Windy :"})," ",t.windy?"True":"False"]}),Object(d.jsxs)("p",{children:[Object(d.jsx)("b",{children:"Congestion level :"})," ",t.congestionLevel]}),Object(d.jsxs)("p",{children:[Object(d.jsx)("b",{children:"Event position :"})," ",D(t.pos.lat,t.pos.lng).format()]})]})}function y(e){var t,r=e.currentDriver,c=e.drivers,i=e.recenter,s=e.currentDriverHandler,j=Object(n.useState)(!1),a=Object(l.a)(j,2),v=a[0],b=a[1],u=Object(n.useState)(void 0),O=Object(l.a)(u,2),h=O[0],x=O[1];return Object(n.useEffect)((function(){x(void 0)}),[r]),Object(d.jsxs)("div",{className:"DriverPage-wrapper",children:[Object(d.jsxs)("div",{className:"DriverPage-info-wrapper",children:[Object(d.jsx)("div",{className:"DriverPage-info",children:Object(d.jsxs)("p",{children:["Driver Name : ",void 0===r?"No driver selected.":r.driverName,Object(d.jsx)("br",{}),"Truck ID : ",null===r||void 0===r?void 0:r.truckId]})}),r&&Object(d.jsx)("div",{className:"DriverPage-switch-button button",onClick:function(){return b(!v)},children:Object(d.jsx)("p",{children:v?"Events Map Page":"Events Info Page"})})]}),Object(d.jsx)(f,Object(o.a)({recenter:i,currentDriver:r,drivers:c,clickHandler:s,event:h},(t=!v,{containerElement:Object(d.jsx)("div",{style:p(t)}),mapElement:Object(d.jsx)("div",{style:m})}))),r&&Object(d.jsx)(N,{currentDriver:r,eventSelectHandle:x}),v&&h&&Object(d.jsx)(E,{event:h})]})}var k=function(){var e=Object(n.useState)([]),t=Object(l.a)(e,2),r=t[0],c=t[1],i=Object(n.useState)(void 0),s=Object(l.a)(i,2),j=s[0],v=s[1],o=Object(n.useState)(!1),b=Object(l.a)(o,2),u=b[0],O=b[1];Object(n.useEffect)((function(){var e,t;e=window.location.href+"/drivers.json",t=c,fetch(e).then((function(e){return e.json()}),(function(e){console.log(e)})).then((function(e){t(e)}),(function(e){console.log(e)}))}),[]);var h=function(e,t){O(t),v(e)};return Object(d.jsxs)("div",{className:"app-wrapper",children:[Object(d.jsx)("div",{className:"app-driverList",children:Object(d.jsx)(a,{currentDriver:j,drivers:r,clickHandler:h})}),Object(d.jsx)("div",{className:"app-driverPage",children:Object(d.jsx)(y,{currentDriver:j,drivers:r,currentDriverHandler:h,recenter:u})})]})},w=function(e){e&&e instanceof Function&&r.e(3).then(r.bind(null,352)).then((function(t){var r=t.getCLS,n=t.getFID,c=t.getFCP,i=t.getLCP,s=t.getTTFB;r(e),n(e),c(e),i(e),s(e)}))};s.a.render(Object(d.jsx)(c.a.StrictMode,{children:Object(d.jsx)(k,{})}),document.getElementById("root")),w()},84:function(e,t,r){},85:function(e,t,r){}},[[351,1,2]]]);
//# sourceMappingURL=main.8e32ed54.chunk.js.map