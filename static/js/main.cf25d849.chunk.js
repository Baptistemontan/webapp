(this.webpackJsonpwebapp=this.webpackJsonpwebapp||[]).push([[0],{147:function(e,t,n){},148:function(e,t,n){},349:function(e,t,n){},351:function(e,t,n){"use strict";n.r(t);var c=n(1),r=n.n(c),i=n(57),s=n.n(i),l=(n(147),n(12)),j=(n(148),n(84),n(0));function a(e){var t=e.driver;return Object(j.jsx)("div",{className:"DriverSelect-wrapper",children:Object(j.jsx)("p",{className:"DriverSelect-name",children:(null===t||void 0===t?void 0:t.driverName)||"No driver"})})}function d(e){var t=e.currentDriver,n=e.drivers,c=e.clickHandler,r=n.map((function(e,n){return Object(j.jsx)("li",{className:"DriverList-Selector button "+(e.driverId===(null===t||void 0===t?void 0:t.driverId)?"selected":""),onClick:function(){return c(e,!0)},children:Object(j.jsx)(a,{driver:e})},e.driverName+n)})),i=Object(j.jsx)("li",{className:"DriverList-Selector",children:Object(j.jsx)(a,{})});return Object(j.jsx)("ul",{className:"DriverList-Wrapper noselect",children:r.length?r:i})}function o(e){var t=new Date(e),n=60*t.getTimezoneOffset()*1e3;return new Date(t.getTime()-n).toISOString().slice(0,19).replace(/-/g,"/").replace("T"," ")}function u(e,t){return t.eventTime-e.eventTime}function v(e,t,n){return!t||(c=e,r=n[t-1],!(c.pos.lat===r.pos.lat&&c.pos.lng===r.pos.lng));var c,r}function b(e,t){return t.routeId-e.routeId}function O(e,t){return t.routeName.localeCompare(e.routeName)}function h(e,t){return t.speed-e.speed}function x(e,t){return t.eventType.localeCompare(e.eventType)}function p(e,t){return t.congestionLevel-e.congestionLevel}var f=n(37),m=(n(85),n(20));function g(e){var t=e.driver,n=e.clickHandler,r=Object(c.useState)(!1),i=Object(l.a)(r,2),s=i[0],a=i[1];return Object(j.jsx)(m.Marker,{position:t.events[0].pos,onClick:function(){a(!s),n(t,!1)},children:s&&Object(j.jsx)(m.InfoWindow,{onCloseClick:function(){return a(!1)},children:Object(j.jsx)("p",{children:t.driverName})})})}var N={url:"http://maps.google.com/mapfiles/kml/pushpin/ylw-pushpin.png",origin:{x:-12,y:0}};function D(e){var t=e.event;return Object(j.jsx)(m.Marker,{position:null===t||void 0===t?void 0:t.pos,icon:N})}var k={lat:35.191766965947394,lng:-90.0439453125},y=function(e){return{height:e?"50vh":"0"}},S={height:"100%"};var T=Object(m.withGoogleMap)((function(e){var t=e.recenter,n=e.currentDriver,c=e.drivers,r=e.clickHandler,i=e.event;return Object(j.jsxs)(m.GoogleMap,Object(f.a)(Object(f.a)({defaultZoom:5,defaultCenter:k,options:{gestureHandling:"greedy"}},t&&n?{center:n.events[0].pos}:{}),{},{children:[Object(j.jsx)(j.Fragment,{children:c.map((function(e,t){return e.events[0].pos!==(null===i||void 0===i?void 0:i.pos)&&Object(j.jsx)(g,{driver:e,clickHandler:r},e.driverName+t)}))}),Object(j.jsx)(D,{event:i})]}))})),C=(n(349),"driverEvent-big"),w="driverEvent-small";function I(e){var t=e.event,n=e.clickHandle,c=e.selected;return Object(j.jsxs)("tr",{onClick:n,className:"button "+(c?"selected":""),children:[Object(j.jsxs)("td",{className:C,children:[o(t.eventTime),"  "]}),Object(j.jsxs)("td",{className:w,children:[t.routeId,"                        "]}),Object(j.jsxs)("td",{className:C,children:[t.routeName,"                      "]}),Object(j.jsxs)("td",{className:w,children:[t.speed,"                          "]}),Object(j.jsxs)("td",{className:C,children:[t.eventType,"                      "]}),Object(j.jsxs)("td",{className:w,children:[t.foggy?"True":"False","       "]}),Object(j.jsxs)("td",{className:w,children:[t.rainy?"True":"False","       "]}),Object(j.jsxs)("td",{className:w,children:[t.windy?"True":"False","       "]}),Object(j.jsxs)("td",{className:"driverEvent-last",children:[t.congestionLevel,"        "]})]})}function E(e){var t=e.eventSelectHandle,n=e.currentDriver,r=Object(c.useState)(void 0),i=Object(l.a)(r,2),s=i[0],a=i[1],d=Object(c.useState)(!1),o=Object(l.a)(d,2),f=o[0],m=o[1],g=Object(c.useState)((function(){return u})),N=Object(l.a)(g,2),D=N[0],k=N[1],y=Object(c.useRef)(null);Object(c.useEffect)((function(){var e;a(void 0),m(!1),k((function(){return u})),null===(e=y.current)||void 0===e||e.scrollIntoView()}),[n]);var S,T,E=function(e){D===e?m(!f):(m(!1),k((function(){return e})))};return Object(j.jsxs)("table",{className:"noselect",children:[Object(j.jsx)("thead",{children:Object(j.jsxs)("tr",{className:"driverEvent-Title",children:[Object(j.jsx)("th",{className:C,onClick:function(){return E(u)},children:Object(j.jsx)("div",{children:"Date :                "})}),Object(j.jsx)("th",{className:w,onClick:function(){return E(b)},children:Object(j.jsx)("div",{children:"Route ID :            "})}),Object(j.jsx)("th",{className:C,onClick:function(){return E(O)},children:Object(j.jsx)("div",{children:"Route name :          "})}),Object(j.jsx)("th",{className:w,onClick:function(){return E(h)},children:Object(j.jsx)("div",{children:"Speed :               "})}),Object(j.jsx)("th",{className:C,onClick:function(){return E(x)},children:Object(j.jsx)("div",{children:"Event type :          "})}),Object(j.jsx)("th",{className:w,children:Object(j.jsx)("div",{children:"Foggy :               "})}),Object(j.jsx)("th",{className:w,children:Object(j.jsx)("div",{children:"Rainy :               "})}),Object(j.jsx)("th",{className:w,children:Object(j.jsx)("div",{children:"Windy :               "})}),Object(j.jsx)("th",{className:C,onClick:function(){return E(p)},children:Object(j.jsx)("div",{children:"Congestion level :    "})})]})}),Object(j.jsxs)("tbody",{children:[Object(j.jsx)("tr",{ref:y}),Object(j.jsx)(j.Fragment,{children:n.events.filter(v).sort((S=D,T=f,function(e,t){return(T?-1:1)*S(e,t)})).map((function(e,n){return Object(j.jsx)(I,{selected:n===s,event:e,clickHandle:function(){!function(e,n){a(n),t(e)}(e,n)}},e.routeName+n)}))})]})]})}var F=n(350);function H(e){var t=e.event;return Object(j.jsxs)("div",{children:[Object(j.jsxs)("p",{children:[Object(j.jsx)("b",{children:"Date :"})," ",o(t.eventTime)]}),Object(j.jsxs)("p",{children:[Object(j.jsx)("b",{children:"Route ID :"})," ",t.routeId]}),Object(j.jsxs)("p",{children:[Object(j.jsx)("b",{children:"Route Name :"})," ",t.routeName]}),Object(j.jsxs)("p",{children:[Object(j.jsx)("b",{children:"Speed :"})," ",t.speed," km/h"]}),Object(j.jsxs)("p",{children:[Object(j.jsx)("b",{children:"Event type :"})," ",t.eventType]}),Object(j.jsxs)("p",{children:[Object(j.jsx)("b",{children:"Foggy :"})," ",t.foggy?"True":"False"]}),Object(j.jsxs)("p",{children:[Object(j.jsx)("b",{children:"Rainy :"})," ",t.rainy?"True":"False"]}),Object(j.jsxs)("p",{children:[Object(j.jsx)("b",{children:"Windy :"})," ",t.windy?"True":"False"]}),Object(j.jsxs)("p",{children:[Object(j.jsx)("b",{children:"Congestion level :"})," ",t.congestionLevel]}),Object(j.jsxs)("p",{children:[Object(j.jsx)("b",{children:"Event position :"})," ",F(t.pos.lat,t.pos.lng).format()]})]})}function L(e){var t,n=e.currentDriver,r=e.drivers,i=e.recenter,s=e.currentDriverHandler,a=Object(c.useState)(!1),d=Object(l.a)(a,2),o=d[0],u=d[1],v=Object(c.useState)(void 0),b=Object(l.a)(v,2),O=b[0],h=b[1];return Object(c.useEffect)((function(){h(void 0)}),[n]),Object(j.jsxs)("div",{className:"DriverPage-wrapper",children:[Object(j.jsxs)("div",{className:"DriverPage-info-wrapper",children:[Object(j.jsx)("div",{className:"DriverPage-info",children:Object(j.jsxs)("p",{children:["Driver Name : ",void 0===n?"No driver selected.":n.driverName,Object(j.jsx)("br",{}),"Truck ID : ",null===n||void 0===n?void 0:n.truckId]})}),n&&Object(j.jsx)("div",{className:"DriverPage-switch-button button noselect",onClick:function(){return u(!o)},children:Object(j.jsx)("p",{children:o?"Events Map Page":"Events Info Page"})})]}),Object(j.jsx)(T,Object(f.a)({recenter:i,currentDriver:n,drivers:r,clickHandler:s,event:O},(t=!o,{containerElement:Object(j.jsx)("div",{style:y(t)}),mapElement:Object(j.jsx)("div",{style:S})}))),n&&Object(j.jsx)(E,{currentDriver:n,eventSelectHandle:h}),o&&O&&Object(j.jsx)(H,{event:O})]})}var P=function(){var e=Object(c.useState)([]),t=Object(l.a)(e,2),n=t[0],r=t[1],i=Object(c.useState)(void 0),s=Object(l.a)(i,2),a=s[0],o=s[1],u=Object(c.useState)(!1),v=Object(l.a)(u,2),b=v[0],O=v[1];Object(c.useEffect)((function(){var e,t;e=window.location.href+"/drivers.json",t=r,fetch(e).then((function(e){return e.json()}),(function(e){console.log(e)})).then((function(e){t(e)}),(function(e){console.log(e)}))}),[]);var h=function(e,t){O(t),o(e)};return Object(j.jsxs)("div",{className:"app-wrapper",children:[Object(j.jsx)("div",{className:"app-driverList",children:Object(j.jsx)(d,{currentDriver:a,drivers:n,clickHandler:h})}),Object(j.jsx)("div",{className:"app-driverPage",children:Object(j.jsx)(L,{currentDriver:a,drivers:n,currentDriverHandler:h,recenter:b})})]})},R=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,352)).then((function(t){var n=t.getCLS,c=t.getFID,r=t.getFCP,i=t.getLCP,s=t.getTTFB;n(e),c(e),r(e),i(e),s(e)}))};s.a.render(Object(j.jsx)(r.a.StrictMode,{children:Object(j.jsx)(P,{})}),document.getElementById("root")),R()},84:function(e,t,n){},85:function(e,t,n){}},[[351,1,2]]]);
//# sourceMappingURL=main.cf25d849.chunk.js.map