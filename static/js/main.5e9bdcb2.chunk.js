(this.webpackJsonpwebapp=this.webpackJsonpwebapp||[]).push([[0],{147:function(e,t,n){},148:function(e,t,n){},349:function(e,t,n){},351:function(e,t,n){"use strict";n.r(t);var r=n(1),c=n.n(r),i=n(57),s=n.n(i),l=(n(147),n(12)),a=(n(148),n(84),n(0));function j(e){var t=e.driver;return Object(a.jsx)("div",{className:"DriverSelect-wrapper",children:Object(a.jsx)("p",{className:"DriverSelect-name",children:(null===t||void 0===t?void 0:t.driverName)||"No driver"})})}function o(e){var t=e.currentDriver,n=e.drivers,r=e.clickHandler,c=n.map((function(e,n){return Object(a.jsx)("li",{className:"DriverList-Selector button "+(e===t?"selected":""),onClick:function(){return r(e,!0)},children:Object(a.jsx)(j,{driver:e})},e.driverName+n)})),i=Object(a.jsx)("li",{className:"DriverList-Selector",children:Object(a.jsx)(j,{})});return Object(a.jsx)("ul",{className:"DriverList-Wrapper noselect",children:c.length?c:i})}var d=n(37),u=(n(85),n(20));function v(e){var t=e.driver,n=e.clickHandler,c=Object(r.useState)(!1),i=Object(l.a)(c,2),s=i[0],j=i[1];return Object(a.jsx)(u.Marker,{position:t.lastPos,onClick:function(){j(!s),n(t,!1)},children:s&&Object(a.jsx)(u.InfoWindow,{onCloseClick:function(){return j(!1)},children:Object(a.jsx)("p",{children:t.driverName})})})}var b={url:"http://maps.google.com/mapfiles/kml/pushpin/ylw-pushpin.png",origin:{x:-12,y:0}};function O(e){var t=e.event;return Object(a.jsx)(u.Marker,{position:null===t||void 0===t?void 0:t.pos,icon:b})}var h={lat:35.191766965947394,lng:-90.0439453125},x=function(e){return{height:e?"50vh":"0"}},f={height:"100%"};var p=Object(u.withGoogleMap)((function(e){var t=e.recenter,n=e.currentDriver,r=e.drivers,c=e.clickHandler,i=e.event;return Object(a.jsxs)(u.GoogleMap,Object(d.a)(Object(d.a)({defaultZoom:5,defaultCenter:h,options:{gestureHandling:"greedy"}},t&&n?{center:n.lastPos}:{}),{},{children:[r.map((function(e,t){return e.lastPos!==(null===i||void 0===i?void 0:i.pos)&&Object(a.jsx)(v,{driver:e,clickHandler:c},e.driverName+t)})),Object(a.jsx)(O,{event:i})]}))}));n(349);function m(e){var t=new Date(e),n=60*t.getTimezoneOffset()*1e3;return new Date(t.getTime()-n).toISOString().slice(0,19).replace(/-/g,"/").replace("T"," ")}function g(e,t){return t.eventTime-e.eventTime}function N(e,t,n){return!t||(r=e,c=n[t-1],!(r.pos.lat===c.pos.lat&&r.pos.lng===c.pos.lng));var r,c}function y(e,t){return t.routeId-e.routeId}function k(e,t){return t.routeName.localeCompare(e.routeName)}function D(e,t){return t.speed-e.speed}function C(e,t){return t.eventType.localeCompare(e.eventType)}function T(e,t){return t.congestionLevel-e.congestionLevel}function S(e,t){return e.windy===t.windy?0:e.windy?-1:1}function w(e,t){return e.rainy===t.rainy?0:e.rainy?-1:1}function E(e,t){return e.foggy===t.foggy?0:e.foggy?-1:1}var I="https://pst-2021-server.herokuapp.com",H="driverEvent-big",F="driverEvent-small";function P(e){var t=e.event,n=e.clickHandle,r=e.selected;return Object(a.jsxs)("tr",{onClick:n,className:"button "+(r?"selected":""),children:[Object(a.jsx)("td",{className:H,children:m(t.eventTime)}),Object(a.jsx)("td",{className:F,children:t.routeId}),Object(a.jsx)("td",{className:H,children:t.routeName}),Object(a.jsx)("td",{className:F,children:t.speed}),Object(a.jsx)("td",{className:H,children:t.eventType}),Object(a.jsx)("td",{className:F,children:t.foggy?"True":"False"}),Object(a.jsx)("td",{className:F,children:t.rainy?"True":"False"}),Object(a.jsx)("td",{className:F,children:t.windy?"True":"False"}),Object(a.jsx)("td",{className:"driverEvent-last",children:t.congestionLevel})]})}function L(e){var t=e.currentEvent,n=e.eventSelectHandle,c=e.events,i=Object(r.useState)(!1),s=Object(l.a)(i,2),j=s[0],o=s[1],d=Object(r.useState)((function(){return g})),u=Object(l.a)(d,2),v=u[0],b=u[1],O=Object(r.useRef)(null);Object(r.useEffect)((function(){var e;o(!1),b((function(){return g})),null===(e=O.current)||void 0===e||e.scrollIntoView()}),[c]);var h,x,f=function(e){v===e?o(!j):(o(!1),b((function(){return e})))};return Object(a.jsxs)("table",{className:"noselect",children:[Object(a.jsx)("thead",{children:Object(a.jsxs)("tr",{className:"driverEvent-Title",children:[Object(a.jsx)("th",{className:H,onClick:function(){return f(g)},children:Object(a.jsx)("div",{children:"Date :"})}),Object(a.jsx)("th",{className:F,onClick:function(){return f(y)},children:Object(a.jsx)("div",{children:"Route ID :"})}),Object(a.jsx)("th",{className:H,onClick:function(){return f(k)},children:Object(a.jsx)("div",{children:"Route name :"})}),Object(a.jsx)("th",{className:F,onClick:function(){return f(D)},children:Object(a.jsx)("div",{children:"Speed :"})}),Object(a.jsx)("th",{className:H,onClick:function(){return f(C)},children:Object(a.jsx)("div",{children:"Event type :"})}),Object(a.jsx)("th",{className:F,onClick:function(){return f(E)},children:Object(a.jsx)("div",{children:"Foggy :"})}),Object(a.jsx)("th",{className:F,onClick:function(){return f(w)},children:Object(a.jsx)("div",{children:"Rainy :"})}),Object(a.jsx)("th",{className:F,onClick:function(){return f(S)},children:Object(a.jsx)("div",{children:"Windy :"})}),Object(a.jsx)("th",{className:H,onClick:function(){return f(T)},children:Object(a.jsx)("div",{children:"Congestion level :"})})]})}),Object(a.jsxs)("tbody",{children:[Object(a.jsx)("tr",{ref:O}),c.filter(N).sort((h=v,x=j,function(e,t){return(x?-1:1)*h(e,t)})).map((function(e,r){return Object(a.jsx)(P,{selected:e===t,event:e,clickHandle:function(){return n(e)}},e.eventTime+r)}))]})]})}var R=n(350);function M(e){var t=e.event;return Object(a.jsxs)("div",{children:[Object(a.jsxs)("p",{children:[Object(a.jsx)("b",{children:"Date :"})," ",m(t.eventTime)]}),Object(a.jsxs)("p",{children:[Object(a.jsx)("b",{children:"Route ID :"})," ",t.routeId]}),Object(a.jsxs)("p",{children:[Object(a.jsx)("b",{children:"Route Name :"})," ",t.routeName]}),Object(a.jsxs)("p",{children:[Object(a.jsx)("b",{children:"Speed :"})," ",t.speed," km/h"]}),Object(a.jsxs)("p",{children:[Object(a.jsx)("b",{children:"Event type :"})," ",t.eventType]}),Object(a.jsxs)("p",{children:[Object(a.jsx)("b",{children:"Foggy :"})," ",t.foggy?"True":"False"]}),Object(a.jsxs)("p",{children:[Object(a.jsx)("b",{children:"Rainy :"})," ",t.rainy?"True":"False"]}),Object(a.jsxs)("p",{children:[Object(a.jsx)("b",{children:"Windy :"})," ",t.windy?"True":"False"]}),Object(a.jsxs)("p",{children:[Object(a.jsx)("b",{children:"Congestion level :"})," ",t.congestionLevel]}),Object(a.jsxs)("p",{children:[Object(a.jsx)("b",{children:"Event position :"})," ",R(t.pos.lat,t.pos.lng).format()]})]})}function W(e){var t,n=e.currentDriver,c=e.drivers,i=e.recenter,s=e.currentDriverHandler,j=Object(r.useState)(!1),o=Object(l.a)(j,2),u=o[0],v=o[1],b=Object(r.useState)(void 0),O=Object(l.a)(b,2),h=O[0],m=O[1],g=Object(r.useState)(void 0),N=Object(l.a)(g,2),y=N[0],k=N[1];return Object(r.useEffect)((function(){m(void 0),n&&fetch(I+"/get/events/"+n.driverId).then((function(e){return e.json()})).then((function(e){return k(e)}))}),[n]),Object(a.jsxs)("div",{className:"DriverPage-wrapper",children:[Object(a.jsxs)("div",{className:"DriverPage-info-wrapper",children:[Object(a.jsx)("div",{className:"DriverPage-info",children:Object(a.jsxs)("p",{children:["Driver Name : ",void 0===n?"No driver selected.":n.driverName,Object(a.jsx)("br",{}),"Truck ID : ",null===n||void 0===n?void 0:n.truckId]})}),n&&Object(a.jsx)("div",{className:"DriverPage-switch-button button noselect",onClick:function(){return v(!u)},children:Object(a.jsx)("p",{children:u?"Events Map Page":"Events Info Page"})})]}),Object(a.jsx)(p,Object(d.a)({recenter:i,currentDriver:n,drivers:c,clickHandler:s,event:h},(t=!u,{containerElement:Object(a.jsx)("div",{style:x(t)}),mapElement:Object(a.jsx)("div",{style:f})}))),y&&Object(a.jsx)(L,{currentEvent:h,events:y,eventSelectHandle:m}),u&&h&&Object(a.jsx)(M,{event:h})]})}var B=function(){var e=Object(r.useState)([]),t=Object(l.a)(e,2),n=t[0],c=t[1],i=Object(r.useState)(void 0),s=Object(l.a)(i,2),j=s[0],d=s[1],u=Object(r.useState)(!1),v=Object(l.a)(u,2),b=v[0],O=v[1];Object(r.useEffect)((function(){fetch(I+"/get/drivers").then((function(e){return e.json()})).then((function(e){return c(e)}))}),[]);var h=function(e,t){O(t),d(e)};return Object(a.jsxs)("div",{className:"app-wrapper",children:[Object(a.jsx)("div",{className:"app-driverList",children:Object(a.jsx)(o,{currentDriver:j,drivers:n,clickHandler:h})}),Object(a.jsx)("div",{className:"app-driverPage",children:Object(a.jsx)(W,{currentDriver:j,drivers:n,currentDriverHandler:h,recenter:b})})]})},G=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,352)).then((function(t){var n=t.getCLS,r=t.getFID,c=t.getFCP,i=t.getLCP,s=t.getTTFB;n(e),r(e),c(e),i(e),s(e)}))};s.a.render(Object(a.jsx)(c.a.StrictMode,{children:Object(a.jsx)(B,{})}),document.getElementById("root")),G()},84:function(e,t,n){},85:function(e,t,n){}},[[351,1,2]]]);
//# sourceMappingURL=main.5e9bdcb2.chunk.js.map